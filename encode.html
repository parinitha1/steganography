<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Encode — StegoVault</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
        :root{--bg:#0d0d0d;--card:#141414;--muted:#9aa0a6;--accent:#00ffff;--btn-start:#00ffff;--btn-end:#0077ff;--danger:#ff4d4d}
        *{box-sizing:border-box}body{margin:0;font-family:'Poppins',sans-serif;background:var(--bg);color:#eaeaea}
        .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}
        .card{width:420px;max-width:95%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:28px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 30px rgba(0,255,255,0.03)}
        h2{color:var(--accent);margin:0 0 12px;font-size:20px}
        form{display:flex;flex-direction:column;align-items:center}
        input[type="file"]{width:95%;padding:12px;border-radius:10px;background:#1f1f1f;border:none;color:#fff;margin:10px 0}
        textarea{width:95%;min-height:110px;padding:12px;border-radius:10px;background:#1f1f1f;border:none;color:#fff;margin:10px 0;resize:vertical}
        .btn{margin-top:8px;padding:10px 20px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--btn-start),var(--btn-end));font-weight:700;color:#000;cursor:pointer}
        .flash{color:var(--danger);margin:8px 0;font-size:0.95rem}
        img.preview{margin-top:14px;max-width:95%;border-radius:12px;box-shadow:0 10px 30px rgba(0,255,255,0.06)}
        a.back{display:inline-block;margin-top:14px;color:var(--accent);text-decoration:none}
        a.back:hover{text-decoration:underline}
        @media (max-width:440px){.card{padding:18px}}
    </style>
</head>
<body>
    <div class="wrap">
        <div class="card">
            <h2>Encode Message</h2>

            <form method="POST" enctype="multipart/form-data">
                <input type="file" name="image" accept="image/*" required>
                <textarea name="message" placeholder="Enter your secret message" required></textarea>
                <button class="btn" type="submit">Encode</button>
            </form>

            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="flash">{{ messages[0] }}</div>
                {% endif %}
            {% endwith %}

            {% if encoded_image %}
                <h3 style="color:#cfeffd;margin-top:14px;">Encoded Image</h3>
                <!-- encoded_image is saved as static/uploads/encoded_filename in backend -->
                <img class="preview" src="{{ url_for('static', filename='uploads/' + encoded_image.split('/')[-1]) }}" alt="encoded image">
            {% endif %}

            <a class="back" href="{{ url_for('home') }}">⬅ Back</a>
        </div>
    </div>
</body>
</html>
